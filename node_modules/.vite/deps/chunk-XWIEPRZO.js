import {
  useProduct,
  useProductOption
} from "./chunk-SSTWVKXD.js";
import {
  useNavigate
} from "./chunk-Z267FA2X.js";
import {
  require_jsx_runtime
} from "./chunk-3YQ7MRFA.js";
import {
  elementAttr
} from "./chunk-YPUMDGBE.js";
import {
  classNames
} from "./chunk-AVF5UQVT.js";
import {
  __toESM
} from "./chunk-DNCPQDPH.js";

// node_modules/.pnpm/@xotiny+xb-react-elements@1.1.7_@remix-run+react@2.15.3_react-dom@18.3.1_react@18.3.1__react@_de3647dslfchm23rzktcfpukke/node_modules/@xotiny/xb-react-elements/dist/elements/shopify/product-variants-dropdown-value-item/product-variants-dropdown-value-item.js
var import_jsx_runtime = __toESM(require_jsx_runtime(), 1);

// node_modules/.pnpm/@xotiny+xb-react-elements@1.1.7_@remix-run+react@2.15.3_react-dom@18.3.1_react@18.3.1__react@_de3647dslfchm23rzktcfpukke/node_modules/@xotiny/xb-react-elements/dist/elements/shopify/product-variants-dropdown-value-item/styles.js
import "/Users/vandoan/Documents/code/hydrogen/xo-builder-hydrogen/node_modules/.pnpm/@xotiny+xb-react-elements@1.1.7_@remix-run+react@2.15.3_react-dom@18.3.1_react@18.3.1__react@_de3647dslfchm23rzktcfpukke/node_modules/@xotiny/xb-react-elements/dist/elements/shopify/product-variants-dropdown-value-item/product-variants-dropdown-value-item.xb-product-variants-dropdown-value-item--modifier-01.css";

// node_modules/.pnpm/@xotiny+xb-react-elements@1.1.7_@remix-run+react@2.15.3_react-dom@18.3.1_react@18.3.1__react@_de3647dslfchm23rzktcfpukke/node_modules/@xotiny/xb-react-elements/dist/elements/shopify/product-variants-dropdown-value-item/product-variants-dropdown-value-item.js
var ProductVariantsDropdownValueItem = ({ element }) => {
  var _a, _b, _c;
  const { settings } = element;
  const placementDesktop = settings.placement.desktop;
  const placementTablet = settings.placement.tablet ?? placementDesktop;
  const placementMobile = settings.placement.mobile ?? placementTablet;
  const option = useProductOption();
  const navigate = useNavigate();
  const { selectedVariant, product, setSelectedVariant, isProductPage } = useProduct();
  if (!option || !selectedVariant) {
    return null;
  }
  const optionIndex = product.options.findIndex((item) => item.name === option.name);
  const { selectedOptions } = selectedVariant;
  const getSelectedVariant = (name, value) => {
    const { selectedOptions: selectedOptions2 } = selectedVariant;
    const currentOption = selectedOptions2.map((item) => item.name === name ? { name, value } : item);
    const variant = product == null ? void 0 : product.variants.nodes.find((variant2) => currentOption.every((item, index) => {
      var _a2;
      return item.value === ((_a2 = variant2.selectedOptions[index]) == null ? void 0 : _a2.value);
    }));
    return variant;
  };
  const handleChangeVariant = (name, value) => {
    if (isProductPage) {
      const variant = getSelectedVariant(name, value);
      const link = getVariantUrl(name, value);
      setSelectedVariant(variant);
      navigate(link);
    } else {
      const variant = getSelectedVariant(name, value);
      setSelectedVariant(variant);
    }
  };
  const getVariantUrl = (name, value) => {
    const variant = getSelectedVariant(name, value);
    const params = new URLSearchParams();
    const { selectedOptions: selectedOptions2 } = variant;
    selectedOptions2.forEach((item) => {
      params.set(item.name, item.value);
    });
    return `${location.pathname}?${params.toString()}`;
  };
  return (0, import_jsx_runtime.jsxs)("div", { ...elementAttr(element, {
    classNames: ["xb-product-variant__option-item", (_a = settings.static) == null ? void 0 : _a.class, "xb-field-select-custom", (_b = settings == null ? void 0 : settings.modifier) == null ? void 0 : _b.handle]
  }), children: [(0, import_jsx_runtime.jsxs)("xo-popover-trigger", { class: "xb-field-select-custom__trigger", role: "button", tabIndex: 0, "xo-name": `${element.id}-${optionIndex}`, children: [(0, import_jsx_runtime.jsx)("div", { className: "xb-field-select-custom__name", children: (_c = selectedOptions[optionIndex]) == null ? void 0 : _c.value }), (0, import_jsx_runtime.jsx)("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 512 512", children: (0, import_jsx_runtime.jsx)("path", { d: "M239 401c9.4 9.4 24.6 9.4 33.9 0L465 209c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-175 175L81 175c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9L239 401z" }) })] }), (0, import_jsx_runtime.jsx)("xo-popover", { "xo-name": `${element.id}-${optionIndex}`, "xo-placement": placementDesktop, "xo-breakpoints": `{
          768: {
            placement: '${placementMobile}',
          },
          992: {
            placement: '${placementTablet}',
          },
        }`, "xo-portal": true, children: (0, import_jsx_runtime.jsx)("div", { className: "xb-field-select-custom__popover xb-product-variant-dropdown-item__content xb-scrollbar", children: option.optionValues.map((value, index) => {
    const currentOption = selectedVariant.selectedOptions[optionIndex];
    const isActive = (currentOption == null ? void 0 : currentOption.value) == value.name;
    const activeClass = isActive ? "xb-product-variant__item-check--active" : "";
    return (0, import_jsx_runtime.jsxs)("label", { className: "xb-field-select-custom__check", onClick: () => handleChangeVariant(option.name, value.name), children: [(0, import_jsx_runtime.jsx)("span", { className: classNames(activeClass, "xb-product-variant__item-check"), children: (0, import_jsx_runtime.jsx)("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 448 512", children: (0, import_jsx_runtime.jsx)("path", { d: "M441 103c9.4 9.4 9.4 24.6 0 33.9L177 401c-9.4 9.4-24.6 9.4-33.9 0L7 265c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l119 119L407 103c9.4-9.4 24.6-9.4 33.9 0z" }) }) }), (0, import_jsx_runtime.jsx)("span", { className: "xb-product-variant__option-item-label", children: value.name })] }, `${value.name}${index}`);
  }) }) })] });
};

export {
  ProductVariantsDropdownValueItem
};
//# sourceMappingURL=chunk-XWIEPRZO.js.map
