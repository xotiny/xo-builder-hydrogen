{
  "version": 3,
  "sources": ["../../.pnpm/@xotiny+xb-react-elements@1.1.7_@remix-run+react@2.15.3_react-dom@18.3.1_react@18.3.1__react@_de3647dslfchm23rzktcfpukke/node_modules/@xotiny/xb-react-elements/dist/elements/shopify/currency-selector/currency-selector.js", "../../.pnpm/@xotiny+xb-react-elements@1.1.7_@remix-run+react@2.15.3_react-dom@18.3.1_react@18.3.1__react@_de3647dslfchm23rzktcfpukke/node_modules/@xotiny/xb-react-elements/dist/elements/shopify/currency-selector/styles.js"],
  "sourcesContent": ["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useFetcher, useLocation, useRouteLoaderData } from '@remix-run/react';\nimport { CartForm } from '@shopify/hydrogen';\nimport { useCallback, useEffect, useRef } from 'react';\nimport { elementAttr } from \"../../../utils/template-helpers/element-attr\";\nimport { classNames } from \"../../../utils/class-names\";\nimport './styles';\nconst DEFAULT_LOCALE = {\n    label: 'United States (USD $)',\n    language: 'EN',\n    country: 'US',\n    currency: 'USD',\n};\nexport const CurrencySelector = ({ element }) => {\n    const { settings } = element;\n    const fetcher = useFetcher();\n    const closeRef = useRef(null);\n    const rootData = useRouteLoaderData('root');\n    const selectedLocale = rootData?.selectedLocale ?? DEFAULT_LOCALE;\n    const { pathname, search } = useLocation();\n    const pathWithoutLocale = `${pathname.replace(selectedLocale.pathPrefix, '')}${search}`;\n    const countries = (fetcher.data ?? {});\n    const defaultLocale = countries?.default;\n    const defaultLocalePrefix = defaultLocale ? `${defaultLocale?.language}-${defaultLocale?.country}` : '';\n    const flagClass = `xb-currency-selector__flag-${settings.flagShape}`;\n    const placementDesktop = settings.placement.desktop;\n    const placementTablet = settings.placement.tablet ?? placementDesktop;\n    const placementMobile = settings.placement.mobile ?? placementTablet;\n    useEffect(() => {\n        if (fetcher.data || fetcher.state === 'loading')\n            return;\n        fetcher.load('/api/countries');\n    }, [fetcher]);\n    const closeDropdown = useCallback(() => {\n        closeRef.current?.removeAttribute('open');\n    }, []);\n    const getCountryUrlPath = ({ countryLocale, defaultLocalePrefix, pathWithoutLocale, }) => {\n        let countryPrefixPath = '';\n        const countryLocalePrefix = `${countryLocale.language}-${countryLocale.country}`;\n        if (countryLocalePrefix !== defaultLocalePrefix) {\n            countryPrefixPath = `/${countryLocalePrefix.toLowerCase()}`;\n        }\n        return `${countryPrefixPath}${pathWithoutLocale}`;\n    };\n    return (_jsxs(\"div\", { ...elementAttr(element, {\n            classNames: ['xb-currency-selector', settings?.modifier?.handle, settings.static?.class, 'relative'],\n        }), children: [_jsxs(\"xo-popover-trigger\", { class: classNames('xb-currency-selector__trigger', flagClass), \"xo-name\": element.id, tabIndex: 0, role: \"button\", children: [_jsx(\"span\", { className: \"xb-currency-selector__name\", children: selectedLocale.label }), _jsx(\"svg\", { className: \"xb-currency-selector__icon\", xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 512 512\", children: _jsx(\"path\", { d: \"M239 401c9.4 9.4 24.6 9.4 33.9 0L465 209c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-175 175L81 175c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9L239 401z\" }) })] }), _jsx(\"xo-popover\", { \"xo-name\": element.id, class: \"xb-currency-selector__wrapper-content\", \"xo-placement\": placementDesktop, \"xo-breakpoints\": `{\n            768: {\n              placement: '${placementMobile}',\n            },\n            992: {\n              placement: '${placementTablet}',\n            },\n          }`, \"xo-portal\": true, children: _jsx(\"div\", { className: \"xb-currency-selector__content xb-scrollbar\", children: countries &&\n                        Object.keys(countries).map(countryPath => {\n                            const countryLocale = countries[countryPath];\n                            const isSelected = countryLocale.language === selectedLocale.language && countryLocale.country === selectedLocale.country;\n                            const countryUrlPath = getCountryUrlPath({\n                                countryLocale,\n                                defaultLocalePrefix,\n                                pathWithoutLocale,\n                            });\n                            return (_jsx(CartForm, { route: \"/cart\", action: CartForm.ACTIONS.BuyerIdentityUpdate, inputs: {\n                                    buyerIdentity: {\n                                        countryCode: countryLocale.country,\n                                    },\n                                }, children: _jsxs(\"label\", { className: classNames('xb-currency-selector__item', isSelected ? 'xb-currency-selector__item--active' : ''), children: [_jsx(\"input\", { type: \"hidden\", name: \"redirectTo\", value: countryUrlPath }), _jsx(\"button\", { className: \"xb-currency-selector__name\", type: \"submit\", onClick: closeDropdown, children: countryLocale.label })] }) }, countryPath));\n                        }) }) })] }));\n};\n", "import './currency-selector.css';\nimport './currency-selector.xb-currency-selector--modifier-01.css';\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,yBAA2C;AAG3C,IAAAA,gBAA+C;;;ACH/C,OAAO;AACP,OAAO;;;ADMP,IAAM,iBAAiB;AAAA,EACnB,OAAO;AAAA,EACP,UAAU;AAAA,EACV,SAAS;AAAA,EACT,UAAU;AACd;AACO,IAAM,mBAAmB,CAAC,EAAE,QAAQ,MAAM;AAbjD;AAcI,QAAM,EAAE,SAAS,IAAI;AACrB,QAAM,UAAU,WAAW;AAC3B,QAAM,eAAW,sBAAO,IAAI;AAC5B,QAAM,WAAW,mBAAmB,MAAM;AAC1C,QAAM,kBAAiB,qCAAU,mBAAkB;AACnD,QAAM,EAAE,UAAU,OAAO,IAAI,YAAY;AACzC,QAAM,oBAAoB,GAAG,SAAS,QAAQ,eAAe,YAAY,EAAE,CAAC,GAAG,MAAM;AACrF,QAAM,YAAa,QAAQ,QAAQ,CAAC;AACpC,QAAM,gBAAgB,uCAAW;AACjC,QAAM,sBAAsB,gBAAgB,GAAG,+CAAe,QAAQ,IAAI,+CAAe,OAAO,KAAK;AACrG,QAAM,YAAY,8BAA8B,SAAS,SAAS;AAClE,QAAM,mBAAmB,SAAS,UAAU;AAC5C,QAAM,kBAAkB,SAAS,UAAU,UAAU;AACrD,QAAM,kBAAkB,SAAS,UAAU,UAAU;AACrD,+BAAU,MAAM;AACZ,QAAI,QAAQ,QAAQ,QAAQ,UAAU;AAClC;AACJ,YAAQ,KAAK,gBAAgB;AAAA,EACjC,GAAG,CAAC,OAAO,CAAC;AACZ,QAAM,oBAAgB,2BAAY,MAAM;AAjC5C,QAAAC;AAkCQ,KAAAA,MAAA,SAAS,YAAT,gBAAAA,IAAkB,gBAAgB;AAAA,EACtC,GAAG,CAAC,CAAC;AACL,QAAM,oBAAoB,CAAC,EAAE,eAAe,qBAAAC,sBAAqB,mBAAAC,mBAAmB,MAAM;AACtF,QAAI,oBAAoB;AACxB,UAAM,sBAAsB,GAAG,cAAc,QAAQ,IAAI,cAAc,OAAO;AAC9E,QAAI,wBAAwBD,sBAAqB;AAC7C,0BAAoB,IAAI,oBAAoB,YAAY,CAAC;AAAA,IAC7D;AACA,WAAO,GAAG,iBAAiB,GAAGC,kBAAiB;AAAA,EACnD;AACA,aAAQ,mBAAAC,MAAM,OAAO,EAAE,GAAG,YAAY,SAAS;AAAA,IACvC,YAAY,CAAC,yBAAwB,0CAAU,aAAV,mBAAoB,SAAQ,cAAS,WAAT,mBAAiB,OAAO,UAAU;AAAA,EACvG,CAAC,GAAG,UAAU,KAAC,mBAAAA,MAAM,sBAAsB,EAAE,OAAO,WAAW,iCAAiC,SAAS,GAAG,WAAW,QAAQ,IAAI,UAAU,GAAG,MAAM,UAAU,UAAU,KAAC,mBAAAC,KAAK,QAAQ,EAAE,WAAW,8BAA8B,UAAU,eAAe,MAAM,CAAC,OAAG,mBAAAA,KAAK,OAAO,EAAE,WAAW,8BAA8B,OAAO,8BAA8B,SAAS,eAAe,cAAU,mBAAAA,KAAK,QAAQ,EAAE,GAAG,uJAAuJ,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,OAAG,mBAAAA,KAAK,cAAc,EAAE,WAAW,QAAQ,IAAI,OAAO,yCAAyC,gBAAgB,kBAAkB,kBAAkB;AAAA;AAAA,4BAEprB,eAAe;AAAA;AAAA;AAAA,4BAGf,eAAe;AAAA;AAAA,cAE7B,aAAa,MAAM,cAAU,mBAAAA,KAAK,OAAO,EAAE,WAAW,8CAA8C,UAAU,aACpG,OAAO,KAAK,SAAS,EAAE,IAAI,iBAAe;AACtC,UAAM,gBAAgB,UAAU,WAAW;AAC3C,UAAM,aAAa,cAAc,aAAa,eAAe,YAAY,cAAc,YAAY,eAAe;AAClH,UAAM,iBAAiB,kBAAkB;AAAA,MACrC;AAAA,MACA;AAAA,MACA;AAAA,IACJ,CAAC;AACD,eAAQ,mBAAAA,KAAK,UAAU,EAAE,OAAO,SAAS,QAAQ,SAAS,QAAQ,qBAAqB,QAAQ;AAAA,MACvF,eAAe;AAAA,QACX,aAAa,cAAc;AAAA,MAC/B;AAAA,IACJ,GAAG,cAAU,mBAAAD,MAAM,SAAS,EAAE,WAAW,WAAW,8BAA8B,aAAa,uCAAuC,EAAE,GAAG,UAAU,KAAC,mBAAAC,KAAK,SAAS,EAAE,MAAM,UAAU,MAAM,cAAc,OAAO,eAAe,CAAC,OAAG,mBAAAA,KAAK,UAAU,EAAE,WAAW,8BAA8B,MAAM,UAAU,SAAS,eAAe,UAAU,cAAc,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,WAAW;AAAA,EACjY,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC;AACnC;",
  "names": ["import_react", "_a", "defaultLocalePrefix", "pathWithoutLocale", "_jsxs", "_jsx"]
}
