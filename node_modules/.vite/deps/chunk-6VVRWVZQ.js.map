{
  "version": 3,
  "sources": ["../../.pnpm/@xotiny+xb-react-elements@1.1.7_@remix-run+react@2.15.3_react-dom@18.3.1_react@18.3.1__react@_de3647dslfchm23rzktcfpukke/node_modules/@xotiny/xb-react-elements/dist/utils/get-collection-filter/index.js"],
  "sourcesContent": ["import { CONFIG } from \"../../config\";\nexport function getSortValuesFromParam(sortParam, handle) {\n    switch (sortParam) {\n        case 'price-high-low':\n            return {\n                sortKey: 'PRICE',\n                reverse: true,\n            };\n        case 'price-low-high':\n            return {\n                sortKey: 'PRICE',\n                reverse: false,\n            };\n        case 'best-selling':\n            return {\n                sortKey: 'BEST_SELLING',\n                reverse: false,\n            };\n        case 'newest':\n            return handle === 'all'\n                ? {\n                    sortKey: 'CREATED_AT',\n                    reverse: true,\n                }\n                : {\n                    sortKey: 'CREATED',\n                    reverse: true,\n                };\n        case 'created-descending':\n            return handle === 'all'\n                ? {\n                    sortKey: 'CREATED_AT',\n                    reverse: true,\n                }\n                : {\n                    sortKey: 'CREATED',\n                    reverse: true,\n                };\n        case 'oldest':\n            return handle === 'all'\n                ? {\n                    sortKey: 'CREATED_AT',\n                    reverse: false,\n                }\n                : {\n                    sortKey: 'CREATED',\n                    reverse: false,\n                };\n        case 'created-ascending':\n            return handle === 'all'\n                ? {\n                    sortKey: 'CREATED_AT',\n                    reverse: false,\n                }\n                : {\n                    sortKey: 'CREATED',\n                    reverse: false,\n                };\n        case 'title-ascending':\n            return {\n                sortKey: 'TITLE',\n                reverse: false,\n            };\n        case 'title-descending':\n            return {\n                sortKey: 'TITLE',\n                reverse: true,\n            };\n        case 'featured':\n            return handle === 'all'\n                ? {\n                    sortKey: 'ID',\n                    reverse: false,\n                }\n                : {\n                    sortKey: 'MANUAL',\n                    reverse: false,\n                };\n        default:\n            return {\n                sortKey: 'RELEVANCE',\n                reverse: false,\n            };\n    }\n}\nexport function parseAsCurrency(value, locale) {\n    return new Intl.NumberFormat(locale.language + '-' + locale.country, {\n        style: 'currency',\n        currency: locale.currency,\n    }).format(value);\n}\nexport function getAppliedFilter(filters, allFilterValues, locale) {\n    return filters\n        .map(filter => {\n        const foundValue = allFilterValues?.find(value => {\n            const valueInput = JSON.parse(value.input);\n            // special case for price, the user can enter something freeform (still a number, though)\n            // that may not make sense for the locale/currency.\n            // Basically just check if the price filter is applied at all.\n            if (valueInput.price && filter.price) {\n                return true;\n            }\n            return (\n            // This comparison should be okay as long as we're not manipulating the input we\n            // get from the API before using it as a URL param.\n            JSON.stringify(valueInput) === JSON.stringify(filter));\n        });\n        if (!foundValue) {\n            // eslint-disable-next-line no-console\n            console.error('Could not find filter value for filter', filter);\n            return null;\n        }\n        if (foundValue.id === 'filter.v.price') {\n            // Special case for price, we want to show the min and max values as the label.\n            const input = JSON.parse(foundValue.input);\n            const min = parseAsCurrency(input.price?.min ?? 0, locale);\n            const max = input.price?.max ? parseAsCurrency(input.price.max, locale) : '';\n            const label = min && max ? `${min} - ${max}` : 'Price';\n            return {\n                filter,\n                label,\n            };\n        }\n        return {\n            filter,\n            label: foundValue.label,\n        };\n    })\n        .filter((filter) => filter !== null);\n}\nexport function getAppliedFilterLink(filter, params, location) {\n    const paramsClone = new URLSearchParams(params);\n    Object.entries(filter.filter).forEach(([key, value]) => {\n        const fullKey = CONFIG.collectionPage.filterUrlPrefix + key;\n        paramsClone.delete(fullKey, JSON.stringify(value));\n    });\n    return `${location.pathname}?${paramsClone.toString()}`;\n}\nexport function filterInputToParams(rawInput, params) {\n    const input = typeof rawInput === 'string' ? JSON.parse(rawInput) : rawInput;\n    Object.entries(input).forEach(([key, value]) => {\n        if (key === 'price') {\n            // For price, we want to overwrite\n            params.set(`${CONFIG.collectionPage.filterUrlPrefix}${key}`, JSON.stringify(value));\n        }\n        else {\n            if (params.has(`${CONFIG.collectionPage.filterUrlPrefix}${key}`, JSON.stringify(value))) {\n                params.delete(`${CONFIG.collectionPage.filterUrlPrefix}${key}`, JSON.stringify(value));\n            }\n            else {\n                params.append(`${CONFIG.collectionPage.filterUrlPrefix}${key}`, JSON.stringify(value));\n            }\n        }\n    });\n    return params;\n}\nexport function getFilterLink(rawInput, params, location) {\n    const paramsClone = new URLSearchParams(params);\n    const newParams = filterInputToParams(rawInput, paramsClone);\n    return `${location.pathname}?${newParams.toString()}`;\n}\n"],
  "mappings": ";;;;;AACO,SAAS,uBAAuB,WAAW,QAAQ;AACtD,UAAQ,WAAW;AAAA,IACf,KAAK;AACD,aAAO;AAAA,QACH,SAAS;AAAA,QACT,SAAS;AAAA,MACb;AAAA,IACJ,KAAK;AACD,aAAO;AAAA,QACH,SAAS;AAAA,QACT,SAAS;AAAA,MACb;AAAA,IACJ,KAAK;AACD,aAAO;AAAA,QACH,SAAS;AAAA,QACT,SAAS;AAAA,MACb;AAAA,IACJ,KAAK;AACD,aAAO,WAAW,QACZ;AAAA,QACE,SAAS;AAAA,QACT,SAAS;AAAA,MACb,IACE;AAAA,QACE,SAAS;AAAA,QACT,SAAS;AAAA,MACb;AAAA,IACR,KAAK;AACD,aAAO,WAAW,QACZ;AAAA,QACE,SAAS;AAAA,QACT,SAAS;AAAA,MACb,IACE;AAAA,QACE,SAAS;AAAA,QACT,SAAS;AAAA,MACb;AAAA,IACR,KAAK;AACD,aAAO,WAAW,QACZ;AAAA,QACE,SAAS;AAAA,QACT,SAAS;AAAA,MACb,IACE;AAAA,QACE,SAAS;AAAA,QACT,SAAS;AAAA,MACb;AAAA,IACR,KAAK;AACD,aAAO,WAAW,QACZ;AAAA,QACE,SAAS;AAAA,QACT,SAAS;AAAA,MACb,IACE;AAAA,QACE,SAAS;AAAA,QACT,SAAS;AAAA,MACb;AAAA,IACR,KAAK;AACD,aAAO;AAAA,QACH,SAAS;AAAA,QACT,SAAS;AAAA,MACb;AAAA,IACJ,KAAK;AACD,aAAO;AAAA,QACH,SAAS;AAAA,QACT,SAAS;AAAA,MACb;AAAA,IACJ,KAAK;AACD,aAAO,WAAW,QACZ;AAAA,QACE,SAAS;AAAA,QACT,SAAS;AAAA,MACb,IACE;AAAA,QACE,SAAS;AAAA,QACT,SAAS;AAAA,MACb;AAAA,IACR;AACI,aAAO;AAAA,QACH,SAAS;AAAA,QACT,SAAS;AAAA,MACb;AAAA,EACR;AACJ;AACO,SAAS,gBAAgB,OAAO,QAAQ;AAC3C,SAAO,IAAI,KAAK,aAAa,OAAO,WAAW,MAAM,OAAO,SAAS;AAAA,IACjE,OAAO;AAAA,IACP,UAAU,OAAO;AAAA,EACrB,CAAC,EAAE,OAAO,KAAK;AACnB;AACO,SAAS,iBAAiB,SAAS,iBAAiB,QAAQ;AAC/D,SAAO,QACF,IAAI,YAAU;AA7FvB;AA8FQ,UAAM,aAAa,mDAAiB,KAAK,WAAS;AAC9C,YAAM,aAAa,KAAK,MAAM,MAAM,KAAK;AAIzC,UAAI,WAAW,SAAS,OAAO,OAAO;AAClC,eAAO;AAAA,MACX;AACA;AAAA;AAAA;AAAA,QAGA,KAAK,UAAU,UAAU,MAAM,KAAK,UAAU,MAAM;AAAA;AAAA,IACxD;AACA,QAAI,CAAC,YAAY;AAEb,cAAQ,MAAM,0CAA0C,MAAM;AAC9D,aAAO;AAAA,IACX;AACA,QAAI,WAAW,OAAO,kBAAkB;AAEpC,YAAM,QAAQ,KAAK,MAAM,WAAW,KAAK;AACzC,YAAM,MAAM,kBAAgB,WAAM,UAAN,mBAAa,QAAO,GAAG,MAAM;AACzD,YAAM,QAAM,WAAM,UAAN,mBAAa,OAAM,gBAAgB,MAAM,MAAM,KAAK,MAAM,IAAI;AAC1E,YAAM,QAAQ,OAAO,MAAM,GAAG,GAAG,MAAM,GAAG,KAAK;AAC/C,aAAO;AAAA,QACH;AAAA,QACA;AAAA,MACJ;AAAA,IACJ;AACA,WAAO;AAAA,MACH;AAAA,MACA,OAAO,WAAW;AAAA,IACtB;AAAA,EACJ,CAAC,EACI,OAAO,CAAC,WAAW,WAAW,IAAI;AAC3C;AACO,SAAS,qBAAqB,QAAQ,QAAQ,UAAU;AAC3D,QAAM,cAAc,IAAI,gBAAgB,MAAM;AAC9C,SAAO,QAAQ,OAAO,MAAM,EAAE,QAAQ,CAAC,CAAC,KAAK,KAAK,MAAM;AACpD,UAAM,UAAU,OAAO,eAAe,kBAAkB;AACxD,gBAAY,OAAO,SAAS,KAAK,UAAU,KAAK,CAAC;AAAA,EACrD,CAAC;AACD,SAAO,GAAG,SAAS,QAAQ,IAAI,YAAY,SAAS,CAAC;AACzD;AACO,SAAS,oBAAoB,UAAU,QAAQ;AAClD,QAAM,QAAQ,OAAO,aAAa,WAAW,KAAK,MAAM,QAAQ,IAAI;AACpE,SAAO,QAAQ,KAAK,EAAE,QAAQ,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,QAAI,QAAQ,SAAS;AAEjB,aAAO,IAAI,GAAG,OAAO,eAAe,eAAe,GAAG,GAAG,IAAI,KAAK,UAAU,KAAK,CAAC;AAAA,IACtF,OACK;AACD,UAAI,OAAO,IAAI,GAAG,OAAO,eAAe,eAAe,GAAG,GAAG,IAAI,KAAK,UAAU,KAAK,CAAC,GAAG;AACrF,eAAO,OAAO,GAAG,OAAO,eAAe,eAAe,GAAG,GAAG,IAAI,KAAK,UAAU,KAAK,CAAC;AAAA,MACzF,OACK;AACD,eAAO,OAAO,GAAG,OAAO,eAAe,eAAe,GAAG,GAAG,IAAI,KAAK,UAAU,KAAK,CAAC;AAAA,MACzF;AAAA,IACJ;AAAA,EACJ,CAAC;AACD,SAAO;AACX;AACO,SAAS,cAAc,UAAU,QAAQ,UAAU;AACtD,QAAM,cAAc,IAAI,gBAAgB,MAAM;AAC9C,QAAM,YAAY,oBAAoB,UAAU,WAAW;AAC3D,SAAO,GAAG,SAAS,QAAQ,IAAI,UAAU,SAAS,CAAC;AACvD;",
  "names": []
}
