import {
  FilterCollectionItem,
  PriceRangeFilter
} from "./chunk-LCGNXR2R.js";
import {
  getFilterLink
} from "./chunk-6VVRWVZQ.js";
import {
  CONFIG,
  useCollectionDetail,
  useElementSettings
} from "./chunk-SSTWVKXD.js";
import {
  Link,
  useLocation,
  useSearchParams
} from "./chunk-Z267FA2X.js";
import {
  require_jsx_runtime
} from "./chunk-3YQ7MRFA.js";
import {
  elementAttr
} from "./chunk-YPUMDGBE.js";
import {
  classNames
} from "./chunk-AVF5UQVT.js";
import {
  __toESM
} from "./chunk-DNCPQDPH.js";

// node_modules/.pnpm/@xotiny+xb-react-elements@1.1.7_@remix-run+react@2.15.3_react-dom@18.3.1_react@18.3.1__react@_de3647dslfchm23rzktcfpukke/node_modules/@xotiny/xb-react-elements/dist/elements/shopify/collection-filtering-horizontal/collection-filtering-horizontal.js
var import_jsx_runtime = __toESM(require_jsx_runtime(), 1);

// node_modules/.pnpm/@xotiny+xb-react-elements@1.1.7_@remix-run+react@2.15.3_react-dom@18.3.1_react@18.3.1__react@_de3647dslfchm23rzktcfpukke/node_modules/@xotiny/xb-react-elements/dist/elements/shopify/collection-filtering-horizontal/styles.js
import "/Users/vandoan/Documents/code/hydrogen/xo-builder-hydrogen/node_modules/.pnpm/@xotiny+xb-react-elements@1.1.7_@remix-run+react@2.15.3_react-dom@18.3.1_react@18.3.1__react@_de3647dslfchm23rzktcfpukke/node_modules/@xotiny/xb-react-elements/dist/elements/shopify/collection-filtering-horizontal/collection-filtering-horizontal.css";
import "/Users/vandoan/Documents/code/hydrogen/xo-builder-hydrogen/node_modules/.pnpm/@xotiny+xb-react-elements@1.1.7_@remix-run+react@2.15.3_react-dom@18.3.1_react@18.3.1__react@_de3647dslfchm23rzktcfpukke/node_modules/@xotiny/xb-react-elements/dist/elements/shopify/collection-filtering-horizontal/collection-filtering-horizontal.xb-collection-filtering-horizontal--modifier-01.css";

// node_modules/.pnpm/@xotiny+xb-react-elements@1.1.7_@remix-run+react@2.15.3_react-dom@18.3.1_react@18.3.1__react@_de3647dslfchm23rzktcfpukke/node_modules/@xotiny/xb-react-elements/dist/elements/shopify/collection-filtering-horizontal/collection-filtering-horizontal.js
var CollectionFilteringHorizontal = ({ element }) => {
  var _a, _b, _c, _d;
  const { settings } = element;
  const parentSettings = useElementSettings();
  const data = useCollectionDetail();
  const [params] = useSearchParams();
  const location = useLocation();
  if (!parentSettings || !data || parentSettings.$filterEnabled !== "yes") {
    return null;
  }
  const { appliedFilters, collection, collections } = data;
  if (!collection) {
    return null;
  }
  const filterMarkup = (filter, option) => {
    switch (filter.type) {
      case "PRICE_RANGE":
        const priceFilter = params.get(`${CONFIG.collectionPage.filterUrlPrefix}price`);
        const price = priceFilter ? JSON.parse(priceFilter) : void 0;
        const min = isNaN(Number(price == null ? void 0 : price.min)) ? void 0 : Number(price == null ? void 0 : price.min);
        const max = isNaN(Number(price == null ? void 0 : price.max)) ? void 0 : Number(price == null ? void 0 : price.max);
        return (0, import_jsx_runtime.jsx)(PriceRangeFilter, { min, max });
      default:
        const to = getFilterLink(option.input, params, location);
        const isActive = appliedFilters.some((fil) => JSON.stringify(fil.filter) === option.input);
        const activeClass = isActive ? "xb-field-checkbox-1--active" : "";
        return (0, import_jsx_runtime.jsxs)(Link, { className: classNames("xb-field-checkbox-1", activeClass), prefetch: "intent", to, style: {
          "--icon-size": "16px"
        }, children: [(0, import_jsx_runtime.jsx)("span", { className: "xb-field-checkbox-1__item", children: (0, import_jsx_runtime.jsx)("span", { className: "xb-field-checkbox-1__icon", children: (0, import_jsx_runtime.jsx)("svg", { xmlns: "http://www.w3.org/2000/svg", width: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round", strokeLinejoin: "round", children: (0, import_jsx_runtime.jsx)("polyline", { points: "20 6 9 17 4 12" }) }) }) }), (0, import_jsx_runtime.jsxs)("span", { className: "xb-field-checkbox-1__label", children: [(0, import_jsx_runtime.jsx)("span", { children: option.label }), parentSettings.$numberCountEnabled == "yes" && (0, import_jsx_runtime.jsxs)("div", { children: ["(", option.count, ")"] })] })] });
    }
  };
  return (0, import_jsx_runtime.jsxs)("div", { ...elementAttr(element, {
    classNames: ["xb-collection-filtering-horizontal", (_a = settings == null ? void 0 : settings.modifier) == null ? void 0 : _a.handle, (_b = settings.static) == null ? void 0 : _b.class]
  }), children: [(0, import_jsx_runtime.jsxs)("div", { className: "xb-fieldset-popover", children: [(0, import_jsx_runtime.jsxs)("xo-popover-trigger", { class: "xb-fieldset-popover__trigger", "xo-name": element.id, tabIndex: 0, role: "button", children: [(0, import_jsx_runtime.jsx)("div", { className: "xb-fieldset-popover__label", children: "Collections" }), (0, import_jsx_runtime.jsx)("svg", { xmlns: "http://www.w3.org/2000/svg", width: "15", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round", strokeLinejoin: "round", children: (0, import_jsx_runtime.jsx)("polyline", { points: "6 9 12 15 18 9" }) })] }), (0, import_jsx_runtime.jsx)("xo-popover", { "xo-placement": "bottom-left", "xo-name": element.id, "xo-portal": true, children: (0, import_jsx_runtime.jsx)("div", { className: "xb-fieldset-popover__popover", children: (0, import_jsx_runtime.jsx)("div", { className: "xb-fieldset-popover__content xb-scrollbar", children: collections.map((collection2) => {
    return (0, import_jsx_runtime.jsx)(FilterCollectionItem, { collection: collection2 }, collection2.handle);
  }) }) }) })] }), (_d = (_c = collection == null ? void 0 : collection.products) == null ? void 0 : _c.filters) == null ? void 0 : _d.map((filter) => {
    var _a2;
    const name = filter.label.toLocaleLowerCase();
    if (name === "category") {
      return null;
    }
    return (0, import_jsx_runtime.jsx)("div", { className: "xb-collapse", children: (0, import_jsx_runtime.jsxs)("div", { className: "xb-fieldset-popover", children: [(0, import_jsx_runtime.jsxs)("xo-popover-trigger", { class: "xb-fieldset-popover__trigger", "xo-name": `xb-fieldset-popover-${filter.id}`, children: [(0, import_jsx_runtime.jsx)("div", { className: "xb-fieldset-popover__label", children: filter.label }), (0, import_jsx_runtime.jsx)("svg", { xmlns: "http://www.w3.org/2000/svg", width: "15", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round", strokeLinejoin: "round", children: (0, import_jsx_runtime.jsx)("polyline", { points: "6 9 12 15 18 9" }) })] }), (0, import_jsx_runtime.jsx)("xo-popover", { "xo-name": `xb-fieldset-popover-${filter.id}`, "xo-placement": "bottom-left", "xo-portal": true, style: { opacity: 0 }, children: (0, import_jsx_runtime.jsxs)("div", { className: "xb-fieldset-popover__popover xb-scrollbar", children: [(0, import_jsx_runtime.jsx)("div", { className: "xb-fieldset-popover__heading", children: filter.type === "PRICE_RANGE" ? (() => {
      const priceFilter = params.get(`${CONFIG.collectionPage.filterUrlPrefix}price`);
      const price = priceFilter ? JSON.parse(priceFilter) : void 0;
      const max = isNaN(Number(price == null ? void 0 : price.max)) ? void 0 : Number(price == null ? void 0 : price.max);
      return (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, { children: [(0, import_jsx_runtime.jsxs)("div", { className: "xb-fieldset-popover__caption", children: ["The highest price is ", max] }), (0, import_jsx_runtime.jsx)("div", { className: "xb-fieldset-popover__caption-icon", children: "Reset" })] });
    })() : (() => {
      var _a3, _b2, _c2;
      const count = ((_c2 = (_b2 = (_a3 = filter == null ? void 0 : filter.values) == null ? void 0 : _a3.filter) == null ? void 0 : _b2.call(_a3, (option) => appliedFilters.some((fil) => JSON.stringify(fil.filter) === option.input))) == null ? void 0 : _c2.length) ?? 0;
      return (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, { children: [(0, import_jsx_runtime.jsxs)("div", { className: "xb-fieldset-popover__caption", children: [count, " selected"] }), (0, import_jsx_runtime.jsx)(Link, { to: location.pathname, className: "xb-fieldset-popover__caption-icon", children: "Clear" })] });
    })() }), (0, import_jsx_runtime.jsx)("div", { className: "xb-fieldset-popover__content xb-scrollbar", children: (_a2 = filter == null ? void 0 : filter.values) == null ? void 0 : _a2.map((option) => {
      return (0, import_jsx_runtime.jsx)("div", { children: filterMarkup(filter, option) }, option.id);
    }) })] }) })] }) }, filter.id);
  })] });
};

export {
  CollectionFilteringHorizontal
};
//# sourceMappingURL=chunk-XL3GMMZ7.js.map
