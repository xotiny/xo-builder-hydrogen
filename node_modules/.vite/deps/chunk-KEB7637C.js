import {
  useProduct
} from "./chunk-SSTWVKXD.js";
import {
  ExternalVideo,
  ModelViewer,
  Video
} from "./chunk-NBGQ7WMI.js";
import {
  useSettings
} from "./chunk-OFJGWOBY.js";
import {
  Style
} from "./chunk-PEYES2GH.js";
import {
  require_jsx_runtime
} from "./chunk-3YQ7MRFA.js";
import {
  elementAttr
} from "./chunk-YPUMDGBE.js";
import {
  require_react
} from "./chunk-FO5G5QMT.js";
import {
  __toESM
} from "./chunk-DNCPQDPH.js";

// node_modules/.pnpm/@xotiny+xb-react-elements@1.1.7_@remix-run+react@2.15.3_react-dom@18.3.1_react@18.3.1__react@_de3647dslfchm23rzktcfpukke/node_modules/@xotiny/xb-react-elements/dist/elements/shopify/product-main-media/product-main-media.js
var import_jsx_runtime = __toESM(require_jsx_runtime(), 1);
var import_react = __toESM(require_react(), 1);

// node_modules/.pnpm/@xotiny+xb-react-elements@1.1.7_@remix-run+react@2.15.3_react-dom@18.3.1_react@18.3.1__react@_de3647dslfchm23rzktcfpukke/node_modules/@xotiny/xb-react-elements/dist/elements/shopify/product-main-media/product-main-media-utils.js
function productMainMediaUtils({ element }) {
  var _a, _b, _c;
  const { settings } = element;
  const mediaHeightDesktop = (_a = settings.mediaHeight.desktop) == null ? void 0 : _a.value;
  const mediaHeightTablet = ((_b = settings.mediaHeight.tablet) == null ? void 0 : _b.value) ?? mediaHeightDesktop;
  const mediaHeightMobile = ((_c = settings.mediaHeight.mobile) == null ? void 0 : _c.value) ?? mediaHeightDesktop;
  function getRatio() {
    if (settings.mediaRatio === "square") {
      const ratio = Style.create({
        "--xb-product-media-aspect-ratio": 1
      });
      return ratio.get();
    } else if (settings.mediaRatio === "custom") {
      const ratio = Style.create({
        "--xb-product-media-aspect-ratio": "unset",
        "--xb-product-media-height-desktop": `${mediaHeightDesktop}px`,
        "--xb-product-media-height-tablet": `${mediaHeightTablet}px`,
        "--xb-product-media-height-mobile": `${mediaHeightMobile}px`
      });
      return ratio.get();
    }
  }
  function getObjectFit() {
    if (settings.mediaObjectFit === "contain") {
      const objectFit2 = Style.create({
        "--xb-product-media-object-fit": "contain"
      });
      return objectFit2.get();
    }
    const objectFit = Style.create({
      "--xb-product-media-object-fit": "cover"
    });
    return objectFit.get();
  }
  const imageZoomTag = settings.imageZoom === "yes" ? "xo-image-zoom" : "div";
  const ratioClass = settings.mediaRatio === "original" ? "xb-product-media__main-item--original" : "";
  return {
    getRatio,
    getObjectFit,
    imageZoomTag,
    ratioClass
  };
}

// node_modules/.pnpm/@xotiny+xb-react-elements@1.1.7_@remix-run+react@2.15.3_react-dom@18.3.1_react@18.3.1__react@_de3647dslfchm23rzktcfpukke/node_modules/@xotiny/xb-react-elements/dist/elements/shopify/product-main-media/product-main-media.js
var ProductMainMedia = ({ element }) => {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j;
  const { settings } = element;
  const { getObjectFit, getRatio, imageZoomTag, ratioClass } = productMainMediaUtils({ element });
  const { product } = useProduct(element.id);
  const { globalSettings: global } = useSettings();
  const globalPlaceholder = (_b = (_a = global == null ? void 0 : global.placeholderImage) == null ? void 0 : _a["product-image"]) == null ? void 0 : _b.url;
  const defaultPlaceholder = "https://cdn.shopify.com/s/files/1/0677/7900/2622/files/Product-placeholder.svg?v=1717753235";
  if (!product) {
    return null;
  }
  function renderLoading() {
    var _a2, _b2, _c2, _d2, _e2, _f2, _g2;
    const loaderType = ((_a2 = global == null ? void 0 : global.imageLoader) == null ? void 0 : _a2.type) ?? "loader-1";
    const loaderColor = ((_b2 = global == null ? void 0 : global.imageLoader) == null ? void 0 : _b2.color) ?? "#000";
    const loaderBackgroundColor = ((_c2 = global == null ? void 0 : global.imageLoader) == null ? void 0 : _c2.backgroundColor) ?? "rgba(0, 0, 0, 0.1)";
    const loaderDuration = ((_e2 = (_d2 = global == null ? void 0 : global.imageLoader) == null ? void 0 : _d2.duration) == null ? void 0 : _e2.value) ?? 1600;
    const loaderSize = ((_g2 = (_f2 = global == null ? void 0 : global.imageLoader) == null ? void 0 : _f2.size) == null ? void 0 : _g2.value) ?? 40;
    switch (loaderType) {
      case "loader-1":
        return (0, import_jsx_runtime.jsx)("div", { className: "xb-image__overlay xo-lazyload-overlay", children: (0, import_jsx_runtime.jsx)("div", { className: "xb-image__loading", style: { "--xb-image-loading-background": loaderBackgroundColor }, children: (0, import_jsx_runtime.jsx)("div", { className: "xo-loader-1", style: { "--color": loaderColor, "--duration": loaderDuration, "--size": loaderSize }, children: (0, import_jsx_runtime.jsx)("span", {}) }) }) });
      case "loader-2":
        const loaderSize2 = Math.round(loaderSize / 2);
        return (0, import_jsx_runtime.jsx)("div", { className: "xb-image__overlay xo-lazyload-overlay", children: (0, import_jsx_runtime.jsx)("div", { className: "xb-image__loading", style: { "--xb-image-loading-background": loaderBackgroundColor }, children: (0, import_jsx_runtime.jsx)("div", { className: "xo-loader-2", style: { "--color": loaderColor, "--duration": loaderDuration, "--stroke-width": 2, "--size": loaderSize2 }, children: (0, import_jsx_runtime.jsx)("div", { children: (0, import_jsx_runtime.jsx)("span", {}) }) }) }) });
      case "loader-3":
        const loaderSize3 = Math.round(loaderSize / 4);
        return (0, import_jsx_runtime.jsx)("div", { className: "xb-image__overlay xo-lazyload-overlay", children: (0, import_jsx_runtime.jsx)("div", { className: "xb-image__loading", style: { "--xb-image-loading-background": loaderBackgroundColor }, children: (0, import_jsx_runtime.jsx)("div", { className: "xo-loader-3", style: { "--color": loaderColor, "--duration": loaderDuration, "--size": loaderSize3 }, children: (0, import_jsx_runtime.jsx)("span", {}) }) }) });
    }
  }
  const renderImage = (image) => {
    switch (settings.$mediaClickAction) {
      case "click":
        return (0, import_jsx_runtime.jsxs)("a", { href: `product/${product.handle}`, "aria-label": image.altText, children: [(0, import_jsx_runtime.jsx)("img", { is: "xo-lazyload", "xo-src": image == null ? void 0 : image.url, loading: "lazy", alt: (image == null ? void 0 : image.altText) ?? product.title, width: image == null ? void 0 : image.width, height: image == null ? void 0 : image.height, "xo-intrinsic-width": image == null ? void 0 : image.width, "xo-intrinsic-height": image == null ? void 0 : image.height, "xo-fallback-width": "400" }), renderLoading()] });
      case "gallery":
        return (0, import_jsx_runtime.jsx)("xo-gallery-item", { "xo-thumb-src": image == null ? void 0 : image.url, "xo-src": image == null ? void 0 : image.url });
      default:
        return (0, import_jsx_runtime.jsxs)("div", { children: [(0, import_jsx_runtime.jsx)("img", { is: "xo-lazyload", "xo-src": image == null ? void 0 : image.url, loading: "lazy", alt: (image == null ? void 0 : image.altText) ?? product.title, width: image == null ? void 0 : image.width, height: image == null ? void 0 : image.height, "xo-intrinsic-width": image == null ? void 0 : image.width, "xo-intrinsic-height": image == null ? void 0 : image.height, "xo-fallback-width": "400" }), renderLoading()] });
    }
  };
  return (0, import_jsx_runtime.jsx)("div", { className: "xb-product-media__main", children: (0, import_jsx_runtime.jsx)("xo-carousel-inner", { children: (0, import_jsx_runtime.jsxs)("xo-carousel-list", { children: [!!((_d = (_c = product.media) == null ? void 0 : _c.nodes) == null ? void 0 : _d.length) && ((_f = (_e = product.media) == null ? void 0 : _e.nodes) == null ? void 0 : _f.map((media) => {
    var _a2, _b2, _c2, _d2, _e2, _f2, _g2, _h2, _i2, _j2, _k, _l;
    const ratio = media.__typename === "MediaImage" && !!((_a2 = media == null ? void 0 : media.image) == null ? void 0 : _a2.width) && !!((_b2 = media == null ? void 0 : media.image) == null ? void 0 : _b2.height) ? ((_c2 = media == null ? void 0 : media.image) == null ? void 0 : _c2.width) / ((_d2 = media == null ? void 0 : media.image) == null ? void 0 : _d2.height) : 1;
    return (0, import_jsx_runtime.jsxs)("xo-carousel-slide", { children: [media.mediaContentType === "IMAGE" && media.__typename === "MediaImage" && (0, import_jsx_runtime.jsx)("div", { ...elementAttr(element, {
      classNames: ["xb-product-media__main-item", ratioClass, (_e2 = settings.static) == null ? void 0 : _e2.class, (_f2 = settings == null ? void 0 : settings.modifier) == null ? void 0 : _f2.handle],
      style: {
        ...getRatio(),
        ...getObjectFit()
      }
    }), children: (0, import_react.createElement)(imageZoomTag, {
      "xo-zoom": "3",
      "xo-zoom-src": "",
      style: { width: "100%", "--xb-product-media-aspect-ratio-original": ratio }
    }, renderImage(media == null ? void 0 : media.image)) }), media.mediaContentType === "EXTERNAL_VIDEO" && media.__typename === "ExternalVideo" && (0, import_jsx_runtime.jsx)("div", { ...elementAttr(element, {
      classNames: ["xb-product-media__main-item", ratioClass, (_g2 = settings.static) == null ? void 0 : _g2.class, (_h2 = settings == null ? void 0 : settings.modifier) == null ? void 0 : _h2.handle]
    }), children: (0, import_jsx_runtime.jsx)(ExternalVideo, { data: media }) }), media.mediaContentType === "MODEL_3D" && media.__typename === "Model3d" && (0, import_jsx_runtime.jsx)("div", { ...elementAttr(element, {
      classNames: ["xb-product-media__main-item", ratioClass, (_i2 = settings.static) == null ? void 0 : _i2.class, (_j2 = settings == null ? void 0 : settings.modifier) == null ? void 0 : _j2.handle]
    }), children: (0, import_jsx_runtime.jsx)(ModelViewer, { data: media }) }), media.mediaContentType === "VIDEO" && media.__typename === "Video" && (0, import_jsx_runtime.jsx)("div", { ...elementAttr(element, {
      classNames: ["xb-product-media__main-item", ratioClass, (_k = settings.static) == null ? void 0 : _k.class, (_l = settings == null ? void 0 : settings.modifier) == null ? void 0 : _l.handle]
    }), children: (0, import_jsx_runtime.jsx)(Video, { data: media }) })] }, media.id);
  })), !((_h = (_g = product.media) == null ? void 0 : _g.nodes) == null ? void 0 : _h.length) && (0, import_jsx_runtime.jsx)("xo-carousel-slide", { children: (0, import_jsx_runtime.jsx)("div", { ...elementAttr(element, {
    classNames: ["xb-product-media__main-item", ratioClass, (_i = settings.static) == null ? void 0 : _i.class, (_j = settings == null ? void 0 : settings.modifier) == null ? void 0 : _j.handle],
    style: { ...getRatio(), ...getObjectFit() }
  }), children: (0, import_jsx_runtime.jsx)("img", { is: "xo-lazyload", "xo-src": globalPlaceholder ? globalPlaceholder : defaultPlaceholder, loading: "lazy", alt: product.title, width: "300", height: "300", "xo-intrinsic-width": "300", "xo-intrinsic-height": "300", "xo-fallback-width": "300" }) }) })] }) }) });
};

export {
  ProductMainMedia
};
//# sourceMappingURL=chunk-KEB7637C.js.map
