import { IncomingMessage, ServerResponse } from 'node:http';
import { Request, Response } from 'miniflare';
import { ViteDevServer } from 'vite';

/**
 * Creates a fully qualified URL from a Node request or a string.
 * In the case of a Node request, it uses the host header to determine the origin.
 */
declare function toURL(req?: string | IncomingMessage, origin?: string): URL;
/**
 * Turns a Node request into a Web request by using native Node APIs.
 */
declare function toWeb(req: IncomingMessage, headers?: Record<string, string>): Request<any>;
/**
 * Reads from a Web response and writes to a Node response
 * using native Node APIs.
 */
declare function pipeFromWeb(webResponse: Response, res: ServerResponse): void;
declare function getHmrUrl(viteDevServer: ViteDevServer): string;

export { getHmrUrl, pipeFromWeb, toURL, toWeb };
