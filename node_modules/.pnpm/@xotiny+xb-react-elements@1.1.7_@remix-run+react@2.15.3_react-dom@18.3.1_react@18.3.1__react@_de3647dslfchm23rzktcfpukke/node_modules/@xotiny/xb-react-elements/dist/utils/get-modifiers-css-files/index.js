import { FIELD_TYPES } from "../../constants";
import { objectValues } from '../object/object-values';
import { isEmpty } from '../is-empty';
const FILE_EXTENSION = '.css';
function getModifiersCssFilesFromSettings(rootSettings, rootElementId, settings = {}) {
    return rootSettings.reduce((acc, rootSetting) => {
        if (rootSetting.type !== FIELD_TYPES.MODIFIER) {
            return acc;
        }
        const setting = settings?.[rootSetting.id];
        if (!setting?.handle) {
            return acc;
        }
        return [...acc, `${rootElementId}.${setting.handle}${FILE_EXTENSION}`];
    }, []);
}
export function getModifiersCssFiles(currentElements, elements) {
    if (isEmpty(elements)) {
        return [];
    }
    const allFiles = objectValues(currentElements).flatMap(currentElement => {
        const element = elements[currentElement.elementId];
        if (!element) {
            return '';
        }
        return getModifiersCssFilesFromSettings(element.settings ?? [], element.id, currentElement.settings);
    });
    return [...new Set(allFiles)];
}
