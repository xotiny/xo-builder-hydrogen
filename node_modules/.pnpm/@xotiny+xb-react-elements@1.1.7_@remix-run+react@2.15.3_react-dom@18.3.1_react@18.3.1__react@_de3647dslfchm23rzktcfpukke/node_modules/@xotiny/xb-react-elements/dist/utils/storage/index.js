let checked = false;
const memoryStorage = new Map();
function storageAvailable() {
    if (!checked) {
        checked = true;
        const item = '@localStorageCheck';
        try {
            window.localStorage.setItem(item, item);
            window.localStorage.removeItem(item);
            return true;
        }
        catch {
            return false;
        }
    }
    return undefined;
}
function createStorage() {
    if (storageAvailable()) {
        return window.localStorage;
    }
    return {
        getItem(key) {
            return memoryStorage.get(key) ?? null;
        },
        setItem(key, value) {
            memoryStorage.set(key, value);
        },
        removeItem(key) {
            memoryStorage.delete(key);
        },
        clear() {
            memoryStorage.clear();
        },
        key(index) {
            return Array.from(memoryStorage.keys())[index] ?? null;
        },
        length: 0,
    };
}
export const storage = createStorage();
