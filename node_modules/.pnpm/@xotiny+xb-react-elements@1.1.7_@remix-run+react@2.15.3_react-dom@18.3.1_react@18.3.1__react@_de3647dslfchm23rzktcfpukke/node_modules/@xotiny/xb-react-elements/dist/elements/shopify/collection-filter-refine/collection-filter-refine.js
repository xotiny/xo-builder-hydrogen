import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { Link, useLocation, useSearchParams } from '@remix-run/react';
import { useCollectionDetail } from "../../../hooks/use-shopify-data";
import { getAppliedFilterLink } from "../../../utils/get-collection-filter";
import { elementAttr } from "../../../utils/template-helpers/element-attr";
import './styles';
export const CollectionFilterRefine = ({ element }) => {
    const { settings } = element;
    const data = useCollectionDetail();
    const [params] = useSearchParams();
    const location = useLocation();
    if (!data) {
        return null;
    }
    const { appliedFilters } = data;
    if (!appliedFilters?.length) {
        return null;
    }
    return (_jsx("div", { ...elementAttr(element, {
            classNames: ['xb-collection-filter-refine', settings?.modifier?.handle, settings.static?.class],
        }), children: _jsxs("div", { className: "xb-filters-refine", children: [appliedFilters.map(filter => {
                    return (_jsxs(Link, { to: getAppliedFilterLink(filter, params, location), className: "xb-filters-refine-clear", children: [filter.label, _jsx("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", viewBox: "0 0 24 24", fill: "none", children: _jsx("path", { d: "M6.34397 17.6597C6.19745 17.5132 6.11514 17.3145 6.11514 17.1073C6.11514 16.9001 6.19745 16.7014 6.34397 16.5549L10.8955 12.0033L6.34308 7.45089C6.19657 7.30437 6.11426 7.10566 6.11426 6.89846C6.11426 6.69126 6.19657 6.49254 6.34308 6.34603C6.48959 6.19952 6.68831 6.11721 6.89551 6.11721C7.10271 6.11721 7.30142 6.19952 7.44794 6.34603L12.0004 10.8985L16.5528 6.34601C16.6993 6.1995 16.898 6.11719 17.1052 6.11719C17.3124 6.11719 17.5112 6.1995 17.6577 6.34601C17.8042 6.49252 17.8865 6.69124 17.8865 6.89844C17.8865 7.10564 17.8042 7.30435 17.6577 7.45086L13.1052 12.0033L17.6568 16.5549C17.8033 16.7014 17.8856 16.9001 17.8856 17.1073C17.8856 17.3145 17.8033 17.5132 17.6568 17.6597C17.5103 17.8063 17.3116 17.8886 17.1044 17.8886C16.8972 17.8886 16.6984 17.8063 16.5519 17.6597L12.0004 13.1082L7.44882 17.6597C7.30231 17.8062 7.10359 17.8885 6.89639 17.8885C6.68919 17.8885 6.49048 17.8062 6.34397 17.6597Z", fill: "currentColor" }) })] }, `${filter.label}-${JSON.stringify(filter.filter)}`));
                }), _jsx(Link, { to: location.pathname, className: "xb-filters-refine-clear xb-filters-refine-clear-all", children: "Clear all" })] }) }));
};
