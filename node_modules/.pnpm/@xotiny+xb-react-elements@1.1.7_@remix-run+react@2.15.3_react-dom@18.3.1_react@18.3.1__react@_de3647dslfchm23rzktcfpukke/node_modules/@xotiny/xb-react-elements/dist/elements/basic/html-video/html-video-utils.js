import { Style } from "../../../utils/template-helpers/style";
export function htmlVideoUtils({ element }) {
    const { settings } = element;
    function getVideoWidth() {
        const widthDesktop = settings.videoSize === 'full' ? '100%' : `${settings.videoWidth.desktop.value}px`;
        const widthTablet = settings.videoSize === 'full' ? '100%' : `${settings.videoWidth?.tablet?.value ?? settings.videoWidth.desktop.value}px`;
        const widthMobile = settings.videoSize === 'full' ? '100%' : `${settings.videoWidth?.mobile?.value ?? settings.videoWidth.desktop.value}px`;
        const styles = Style.create({
            '--xb-html-video-width-desktop': widthDesktop,
            '--xb-html-video-width-tablet': widthTablet,
            '--xb-html-video-width-mobile': widthMobile,
        });
        return styles.get();
    }
    function getRatioMaskVideo() {
        if (settings.maskVideoEnabled !== 'yes') {
            const displayRatio = settings.displayRatio === 'custom' ? settings.customRatio.value : settings.displayRatio.replace('%', '');
            const ratioStyle = Style.create({
                '--xb-video-mask-aspect-ratio': displayRatio,
            });
            return ratioStyle.get();
        }
        const ratioMask = [
            { name: 'Mask_Brush_2', ratio: 46600 / 559 },
            { name: 'Mask_Amorphous_Blob', ratio: 43700 / 475 },
            { name: 'Mask_Ribbon', ratio: 46600 / 467 },
            { name: 'Mask_Brutalist_7', ratio: 47100 / 468 },
            { name: 'Mask_Abstract_4', ratio: 46700 / 474 },
            { name: 'Mask_Star', ratio: 46600 / 471 },
            { name: 'MaskImage', ratio: 46600 / 833 },
            { name: 'Mask_Abstract_3', ratio: 46900 / 480 },
            { name: 'Mask_Brush_1', ratio: 46600 / 479 },
            { name: 'Mask_Brush_3', ratio: 46600 / 606 },
            { name: 'Mask_Brush_Circle', ratio: 46600 / 455 },
            { name: 'Mask_Abstract_2', ratio: 48900 / 510 },
            { name: 'Mask_Shield', ratio: 46600 / 397 },
            { name: 'Mask_Two_Square', ratio: 46600 / 462 },
            { name: 'Mask_Arch', ratio: 46600 / 374 },
            { name: 'Mask_Ornament_Square', ratio: 46600 / 425 },
            { name: 'Mask_Pointer', ratio: 46600 / 468 },
            { name: 'Mask_Heart', ratio: 46600 / 468 },
            { name: 'Mask_Bubble_Chat', ratio: 46600 / 511 },
            { name: 'Mask_Abstract_1', ratio: 46600 / 487 },
            { name: 'Mask_Brutalist_6', ratio: 47100 / 465 },
            { name: 'Mask_Half_Circle', ratio: 46600 / 438 },
        ];
        const currentMaskRatio = ratioMask.find(item => settings.maskVideoStyle.includes(item.name));
        const currentRatio = currentMaskRatio?.ratio ?? 100;
        const ratioStyle = Style.create({
            '--xb-video-mask-aspect-ratio': currentRatio,
        });
        return ratioStyle.get();
    }
    function getMaskImageStyle() {
        const styles = Style.create({
            '--xb-image-mask-svg': `url('${settings.maskVideoStyle || ''}')`,
        });
        return styles.get();
    }
    const videoAttrs = {
        ...(settings.muteVideo === 'yes' ? { muted: true } : {}),
        ...(settings.loopEnabled === 'yes' ? { loop: true } : {}),
        ...(settings.showControl === 'yes' ? { controls: true } : {}),
        ...(settings.autoplayEnabled === 'yes' ? { autoplay: true } : {}),
    };
    const placeholderImage = 'https://cdn.shopify.com/s/files/1/0677/7900/2622/files/Default_image.png?v=1713954435';
    const maskVideoClass = settings.maskVideoEnabled === 'yes' ? 'xb-html-video__mask' : '';
    const videoPopupClass = settings.popUpEnabled === 'yes' ? 'xb-html-video__popup' : '';
    return {
        maskVideoClass,
        videoPopupClass,
        getVideoWidth,
        getRatioMaskVideo,
        getMaskImageStyle,
        videoAttrs,
        placeholderImage,
    };
}
