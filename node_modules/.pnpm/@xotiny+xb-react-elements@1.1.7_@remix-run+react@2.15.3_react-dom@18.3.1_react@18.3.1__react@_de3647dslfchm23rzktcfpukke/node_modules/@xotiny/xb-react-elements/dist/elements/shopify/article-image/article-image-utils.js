import { Style } from "../../../utils/template-helpers/style";
export function articleImageUtils({ element }) {
    const { settings } = element;
    const mediaHeightDesktop = settings.mediaHeight.desktop?.value;
    const mediaHeightTablet = settings.mediaHeight.tablet?.value ?? mediaHeightDesktop;
    const mediaHeightMobile = settings.mediaHeight.mobile?.value ?? mediaHeightTablet;
    function getHeightUnit(screen) {
        if (screen === 'tablet') {
            return settings.mediaHeight.tablet ? settings.mediaHeight.tablet?.unit : settings.mediaHeight.desktop?.unit;
        }
        if (screen === 'mobile') {
            return settings.mediaHeight.mobile
                ? settings.mediaHeight.mobile?.unit
                : settings.mediaHeight.tablet
                    ? settings.mediaHeight.tablet?.unit
                    : settings.mediaHeight.desktop?.unit;
        }
        return settings.mediaHeight.desktop?.unit;
    }
    function getRatio() {
        if (settings.mediaRatio === 'square') {
            const ratio = Style.create({
                '--xb-article-image-aspect-ratio-desktop': 1,
                '--xb-article-image-aspect-ratio-tablet': 1,
                '--xb-article-image-aspect-ratio-mobile': 1,
            });
            return ratio.get();
        }
        else if (settings.mediaRatio === 'custom') {
            const ratio = Style.create({});
            if (settings.mediaHeight.desktop?.unit === '%') {
                ratio.set({
                    '--xb-article-image-aspect-ratio-desktop': `100 / ${mediaHeightDesktop}`,
                });
            }
            else {
                ratio.set({
                    '--xb-article-image-aspect-ratio-desktop': 'unset',
                    '--xb-article-image-height-desktop': `${mediaHeightDesktop}px`,
                });
            }
            if (getHeightUnit('tablet') === '%') {
                ratio.set({
                    '--xb-article-image-aspect-ratio-tablet': `100 / ${mediaHeightTablet}`,
                });
            }
            else {
                ratio.set({
                    '--xb-article-image-aspect-ratio-tablet': 'unset',
                    '--xb-article-image-height-tablet': `${mediaHeightTablet}px`,
                });
            }
            if (getHeightUnit('mobile') === '%') {
                ratio.set({
                    '--xb-article-image-aspect-ratio-mobile': `100 / ${mediaHeightMobile}`,
                });
            }
            else {
                ratio.set({
                    '--xb-article-image-aspect-ratio-mobile': 'unset',
                    '--xb-article-image-height-mobile': `${mediaHeightMobile}px`,
                });
            }
            return ratio.get();
        }
    }
    function getObjectRatio() {
        if (settings.mediaObjectFit === 'contain') {
            return Style.create({
                '--xb-article-image-object-fit': 'contain',
            }).get();
        }
        return Style.create({
            '--xb-article-image-object-fit': 'cover',
        }).get();
    }
    const tagName = settings.$enableLink === 'yes' ? 'a' : 'div';
    return {
        tagName,
        getRatio,
        getObjectRatio,
    };
}
